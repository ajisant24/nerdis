<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Live Audio Coding (Python) — Demo</title>

  <link rel="stylesheet" href="style.css">

  <!-- Pyodide -->
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>

  <!-- Tone.js -->
  <script src="https://cdn.jsdelivr.net/npm/tone@14.8.49/build/Tone.js"></script>
</head>
<body>
  <header>
    <h1>Live Audio Coding (Python)</h1>
    <div class="mode-switch">
      <label><input type="radio" name="mode" value="class" checked> Mode Kelas</label>
      <label><input type="radio" name="mode" value="expo"> Mode Pameran</label>
    </div>
  </header>

  <main>
    <section id="left">
      <div class="controls">
        <button id="initBtn">Mulai & Izinkan Audio ▶</button>
        <button id="runBtn" disabled>Jalankan Kode ▶</button>
        <button id="stopBtn" disabled>Stop ■</button>

        <select id="presetSelect">
          <option value="">— Pilih Preset —</option>
          <option value="preset/ambient.py">Ambient</option>
          <option value="preset/horor.py">Horor</option>
          <option value="preset/gamelan.py">Gamelan</option>
        </select>
        <button id="loadPresetBtn">Muat Preset</button>

        <div class="quick-buttons">
          <button id="btnAmbience">Ambience</button>
          <button id="btnGamelan">Gamelan</button>
          <button id="btnHoror">Horor</button>
        </div>

        <div class="visitor-controls">
          <h4>Kontrol Pengunjung</h4>
          <button class="visitor-sound" data-sound="doa">Doa</button>
          <button class="visitor-sound" data-sound="angin">Angin</button>
          <button class="visitor-sound" data-sound="langkah">Langkah</button>
        </div>

        <div class="sliders">
          <label>BPM <input id="bpm" type="range" min="30" max="200" value="90"></label>
          <label>Reverb <input id="reverb" type="range" min="0" max="10" step="0.1" value="2"></label>
        </div>
      </div>
    </section>

    <section id="right">
      <h3>Editor Python</h3>
      <textarea id="pythonCode" spellcheck="false">
# Contoh: Main loop sederhana
set_bpm(90)
play("C4", 0.5)
play("E4", 0.5)
play("G4", 1)
      </textarea>

      <details>
        <summary>Petunjuk Singkat</summary>
        <ul>
          <li><code>play(note, dur)</code> — mainkan nada (contoh: "C4")</li>
          <li><code>play_sample(name)</code> — mainkan file di folder /sounds</li>
          <li><code>set_bpm(n)</code>, <code>set_reverb(s)</code>, <code>pan(v)</code> (v: -1..1)</li>
          <li>Tekan <b>Mulai & Izinkan Audio</b> sekali pada perangkat mobile untuk mengizinkan audio autoplay</li>
        </ul>
      </details>

      <h4>Mode Pameran: Pengaturan</h4>
      <label><input type="checkbox" id="autoPlayExpo"> Auto play saat dibuka</label>
      <label><input type="checkbox" id="visitorControls"> Pengunjung bisa kontrol (tombol suara)</label>
    </section>
  </main>

  <footer>
    <small>Template: Python (Pyodide) + Tone.js — siap deploy ke GitHub & Vercel</small>
  </footer>

  <script src="main.js"></script>
</body>
</html>
